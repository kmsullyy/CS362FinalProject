<!DOCTYPE html>
<html>
    <head>
        <style>
            #canvas {
                border: 2px solid black;
            }
        </style>
    </head>
    <body onload = 'initialize()'>
        <canvas id = 'canvas' width = '1000px' height = '800px'></canvas>
    </body>
    <script>
        //Global variables
        var canvas, ctx;
        var timing;
        var playerX, playerY, obstacleX, obstacleY;
        var left, right, up, down;

        var player = new Image();
        player.src = "player.png";

        function initialize(){

            canvas = document.getElementById('canvas');
            ctx = canvas.getContext('2d');

            timing = 0;

            playerX = 200;
            playerY = 200;

            left = false;
            right = false;
            up = false;
            down = false;

            document.addEventListener("keydown", keyDownHandler);
            document.addEventListener("keyup", keyUpHandler);


            update();
        }

        function update(){
            timing++;

            if(left){
                playerX -= 2;
            }

            if(right){
                playerX += 2;
            }

            if(up){
                playerY -= 2;
            }

            if(down){
                playerY += 2;
            }

            // Boundary checks
            if (playerX < 0) {
                playerX = 0; 
            }
            if (playerX + 50 > canvas.width) {
                playerX = canvas.width - 50; 
            }
            if (playerY < 0) {
                playerY = 0; 
            }
            if (playerY + 50 > canvas.height) {
                playerY = canvas.height - 50; 
            }

            draw();
            requestAnimationFrame(update);
        }

        function draw(){
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.drawImage(player, playerX, playerY, 50, 50);
        }

        function keyDownHandler(e){
            switch(e.keyCode){
                case 37: left = true; break;
                case 39: right = true; break;
                case 38: up = true; break;
                case 40: down = true; break;
            }
        }

        function keyUpHandler(e){
            switch(e.keyCode){
                case 37: left = false; break;
                case 39: right = false; break;
                case 38: up = false; break;
                case 40: down = false; break;
            }
        }

    </script>    
    
</html>
